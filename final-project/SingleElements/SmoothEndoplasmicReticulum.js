/*Domain*/
var domain1 = INTERVALS(1)(100);
var domain2 = DOMAIN([[0,1],[0,1]])([100,100]);
var domain3 = DOMAIN([[0,1],[0,1],[0,1]])([25,25,1]);

/*Color*/
var mattSteelBlue = [70/255,130/255, 180/255,1];
var mattSkyBlue =[135/255, 206/255, 235/255,1]

/*Function*/

/* This function creates an array of knots used by the function nubs. The function takes as input an array of control points. It returns an array of knots. 

   INPUT - An array of points

   OUTPUT - An array of knots.

*/function knots (point) {
  var k = 2; 
  var m =point.length;
  var n = (m + k + 1);
  var first = 1;
  var last = n - 3;


  var knots = [];

  for (var i = 0; i < 3; i++) {
     knots[i] = 0;
    };

  for (var i = 3; i < last; i++,first++) {
     knots[i] = first;

    };

  for (var i = last; i < n; i++) {
     knots[i] = first;
    };

  return knots;
};
/* This function creates a curve with the function Nubs. The function takes as input an array of control points. It returns to the curve. 

   INPUT - An array of points
   
   OUTPUT - A curve built with the function NUBS

*/
function createNubs (point) {
  
  var knots1 = knots(point);
  var c1 = NUBS(S0)(2)(knots1)(point);
  var curve1 = MAP(c1)(domain1);
  //DRAW(curve1);
  return c1;
}
/* This function creates a 1 grade Bezier curve. The function takes as input an array of curves. It returns to the Bezier curve. 

   INPUT - An array of curves

   OUTPUT - A 1 grade Bezier curve

*/
function createBezierS1(curves) {
  var b1 = BEZIER(S1)(curves);
  var b1Map = MAP(b1)(domain2);
  //DRAW(b1Map);
   return b1;
}
/* This function creates a 1 grade Bezier curve. It takes in input an initial point, a final point and an array of points. It returns the 1 grade Bezier curve. 
 
   INPUT - An initial point, a final point and an array of points.

   OUTPUT - A 1 grade Bezier curve. 

*/
function createCurveSurface(pointStart, pointFinal,points) {
  var nubs = [];
  nubs.push(pointStart);
  var j = 1;
  for(var i=0; i<points.length; i++) {
      nubs[j] = createNubs(points[i]);
      //DRAW(nubs[j]);
      j++;
  }
  nubs.push(pointFinal);

  return createBezierS1(nubs);
    }
/* This function takes an array as input and reverses it. It returns the reversed array. 
   
   INPUT - An array 

   OUTPUT - A reversed array 

*/
function reverseR(array) {
  var arrayReturn = [];
  var j = 0;
  for(var i = array.length-1; i>=0; i--) {
        
        arrayReturn[j] = array[i];
        j++;
  }
  return arrayReturn;
}

/*********************************PART 1*****************************************/

//Dx Control curves

var n1 = createNubs([[218.7066192626953, 418.1972961425781, 0],[220.50521850585938, 414.77996826171875, 0],[223.74267578125, 412.6216735839844, 0],[228.59886169433594, 411.18280029296875, 0],[232.196044921875, 410.6432189941406, 0],[237.23208618164062, 410.1036376953125, 0],[242.6278533935547, 410.8230895996094, 0],[246.58474731445312, 412.4418029785156, 0],[249.4624786376953, 415.3195495605469, 0],[250.90135192871094, 418.0174255371094, 0],[250.3617706298828, 420.7153015136719, 0]]);
var n2 = createNubs([[215.82888793945312, 417.8375549316406, -10],[217.98719787597656, 413.5209655761719, -10],[221.76422119140625, 409.5640563964844, -10],[228.41900634765625, 408.3050537109375, -10],[231.65646362304688, 407.5856018066406, -10],[237.05223083496094, 406.8661804199219, -10],[242.98756408691406, 407.5856018066406, -10],[248.38333129882812, 409.38421630859375, -10],[252.8798065185547, 413.88067626953125, -10],[253.7790985107422, 418.0174255371094, -10],[252.52008056640625, 421.0750427246094, -10]]);
var n3 = createNubs([[212.7712860107422, 417.2980041503906, -20],[213.85043334960938, 414.4202575683594, -20],[215.289306640625, 412.08209228515625, -20],[221.40451049804688, 407.40576171875, -20],[228.59886169433594, 405.42730712890625, -20],[231.83631896972656, 404.8877258300781, -20],[237.23208618164062, 404.7078857421875, -20],[243.16741943359375, 406.32659912109375, -20],[247.84375, 410.4633483886719, -20],[251.80064392089844, 414.77996826171875, -20],[252.34022521972656, 418.0174255371094, -20],[251.62078857421875, 421.0750427246094, -20]]);
var n4 = createNubs([[217.44761657714844, 422.33404541015625, -30],[221.40451049804688, 418.0174255371094, -30],[224.10238647460938, 416.0389709472656, -30],[225.3614044189453, 415.3195495605469, -30],[228.23915100097656, 413.88067626953125, -30],[232.73561096191406, 413.5209655761719, -30],[237.05223083496094, 413.5209655761719, -30],[242.44798278808594, 413.7008056640625, -30],[245.3257293701172, 415.3195495605469, -30],[246.58474731445312, 416.9382629394531, -30],[247.30418395996094, 418.37713623046875, -30],[247.48403930664062, 420.3555908203125, -30]]);
var n5 = createNubs([[225.00167846679688, 421.0750427246094, -40],[225.541259765625, 419.8160095214844, -40],[226.4405517578125, 418.73687744140625, -40],[229.13844299316406, 418.0174255371094, -40],[232.3759002685547, 417.8375549316406, -40],[237.23208618164062, 418.73687744140625, -40],[240.64939880371094, 419.8160095214844, -40],[241.18898010253906, 420.8951721191406, -40],[241.7285614013672, 421.9743347167969, -40],[241.7285614013672, 423.053466796875, -40],[241.7285614013672, 424.13262939453125, -40]]);
var n6 = createNubs([[226.80027770996094, 423.4131774902344, -50],[226.98013305664062, 422.33404541015625, -50],[229.13844299316406, 421.2548828125, -50],[230.75717163085938, 421.0750427246094, -50],[233.0953369140625, 421.6145935058594, -50],[234.8939208984375, 422.33404541015625, -50],[235.793212890625, 423.5930480957031, -50],[236.15293884277344, 424.4923400878906, -50],[236.33279418945312, 425.2117919921875, -50],[236.33279418945312, 425.93121337890625, -50],[227.51971435546875, 426.6506652832031, -50]]);
var nRac1Dx = createNubs([[229.49815368652344+30, 426.83050537109375, -60],[230.93702697753906+30, 426.83050537109375, -60],[232.01617431640625+30, 426.83050537109375+1, -57],[232.73561096191406+30, 426.83050537109375+2, -56.5],[233.27519226074223+30, 427.0103759765625+3, -56],[233.8147735595703+30, 427.0103759765625+4, -56.5],[234.8939208984375+30, 427.3700866699219+5, -57],[235.9730682373047+30, 427.3700866699219+6, -60],[236.6925048828125+30, 427.3700866699219+6, -60]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,n5,n6,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var cPBoundDx =[[223.10598754882812,417.7926025390625,0 ],[223.91677856445312,415.9007568359375,0 ],[225.94374084472656,414.4143371582031,0 ],[229.32199096679688,413.3332824707031,0 ],[232.70025634765625,412.6576232910156,0 ],[235.94338989257812,412.2522277832031,0 ],[239.05140686035156,412.6576232910156,0 ],[242.02427673339844,413.7386779785156,0 ],[244.7268829345703,415.22509765625,0 ],[246.61871337890625,416.9818115234375,0 ],[247.5646209716797,419.2790222167969,0 ]];
var nBoundDx= createNubs(cPBoundDx);
var surBoundDx = createBezierS1([nBoundDx,n1])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

//Link Rought Reticulum
var nRet8 = createNubs([[221.47772216796875,401.8037109375-6,-20],[223.0006103515625,402.31134033203125-9,-20],[225.1326446533203,403.02203369140625-10,-20],[226.4524688720703,403.4281311035156-10,-20],[228.17840576171875,403.7326965332031-9,-20],[229.7012939453125,403.834228515625-9,-20],[231.52874755859375,403.7326965332031-6,-20]]);
var volumeSx = createBezierS1([n1,n2,n3,nRet8])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

 //Sx Control curves 

var n1 = createNubs([[218.7066192626953, 418.1972961425781, 0],[219.39688110351562, 420.3992614746094, 0 ],[220.7167205810547, 422.2267150878906, 0 ],[222.8487548828125, 423.6481018066406, 0 ],[227.21435546875, 423.7496032714844, 0 ],[231.98605346679688, 423.343505859375, 0 ],[237.7730255126953, 424.2572326660156, 0 ],[242.3416748046875, 425.4755554199219, 0 ],[246.60574340820312, 425.6785888671875, 0 ],[249.0423583984375, 424.05419921875, 0 ],[250.3617706298828, 420.7153015136719, 0]]);
var n2 = createNubs([[215.82888793945312, 417.8375549316406, -10],[219.06634521484375, 419.63616943359375, -10],[222.48365783691406, 422.5138854980469, -10],[225.541259765625, 423.9527587890625, -10],[229.31829833984375, 425.03192138671875, -10],[231.65646362304688, 425.3916320800781, -10],[235.793212890625, 426.111083984375, -10],[237.95152282714844, 426.2909240722656, -10],[241.7285614013672, 426.2909240722656, -10],[247.30418395996094, 423.9527587890625, -10],[252.52008056640625, 421.0750427246094, -10]]);
var n3 = createNubs([[212.7712860107422, 417.2980041503906, -20],[213.3108673095703, 421.7944641113281, -20],[216.1885986328125, 425.2117919921875, -20],[219.78578186035156, 427.5499572753906, -20],[229.67800903320312, 429.708251953125, -20],[235.25363159179688, 429.708251953125, -20],[241.54869079589844, 429.3485412597656, -20],[246.7646026611328, 427.5499572753906, -20],[249.28262329101562, 424.85205078125, -20],[251.62078857421875, 421.0750427246094, -20]]);
var n4 = createNubs([[217.44761657714844, 422.33404541015625, -30],[220.14549255371094, 424.3125, -30],[222.66351318359375, 424.85205078125, -30],[226.6204071044922, 425.5715026855469, -30],[229.49815368652344, 425.5715026855469, -30],[233.2751922607422, 425.5715026855469, -30],[236.6925048828125, 425.5715026855469, -30],[241.7285614013672, 425.7513427734375, -30],[245.50558471679688, 424.85205078125, -30],[247.48403930664062, 420.3555908203125, -30]]);
var n5 = createNubs([[225.00167846679688, 421.0750427246094, -40],[226.08084106445312, 423.23333740234375, -40],[226.08084106445312, 423.23333740234375, -40],[227.87942504882812, 423.9527587890625, -40],[230.57730102539062, 424.4923400878906, -40],[232.01617431640625, 424.4923400878906, -40],[233.45504760742188, 424.13262939453125, -40],[234.53419494628906, 423.7729187011719, -40],[235.793212890625, 423.7729187011719, -40],[237.591796875, 423.7729187011719, -40],[241.7285614013672, 424.13262939453125, -40]]);
var n6 = createNubs([[226.80027770996094, 423.4131774902344, -50],[227.69956970214844, 426.111083984375, -50],[229.67800903320312, 426.6506652832031, -50],[230.21759033203125, 426.83050537109375, -50],[232.01617431640625, 427.0103759765625, -50],[233.8147735595703, 427.0103759765625, -50],[234.1744842529297, 426.83050537109375, -50],[234.53419494628906, 426.6506652832031, -50],[235.25363159179688, 426.2909240722656, -50],[236.5126495361328, 425.93121337890625, -50],[227.51971435546875, 426.6506652832031, -50]]);
var nRac1Sx = createNubs([[229.49815368652344+30, 426.83050537109375, -60],[230.93702697753906+30, 426.83050537109375, -60],[232.01617431640625+30, 426.83050537109375+1, -63],[232.73561096191406+30, 426.83050537109375+2, -63.5],[233.27519226074223+30, 427.0103759765625+3, -64],[233.8147735595703+30, 427.0103759765625+4, -63.5],[234.8939208984375+30, 427.3700866699219+5, -63],[235.9730682373047+30, 427.3700866699219+6, -60],[236.6925048828125+30, 427.3700866699219+6, -60]]);

var volumeSx = createBezierS1([n1,n2,n3,n4,n5,n6,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var nBoundSx= createNubs([[223.10598754882812,417.7926025390625,0 ],[223.51138305664062,419.2790222167969,0 ],[224.45729064941406,420.9006042480469,0 ],[226.619384765625,421.4411315917969,0 ],[230.26791381835938,421.4411315917969,0 ],[233.51104736328125,421.1708679199219,0 ],[236.48391723632812,421.5762634277344,0 ],[239.72705078125,422.79241943359375,0 ],[243.37557983398438,423.87347412109375,0 ],[245.94305419921875,423.06268310546875,0 ],[247.42950439453125,421.7113952636719,0 ],[247.5646209716797,419.1438903808594,0 ]]);
var surBoundSx = createBezierS1([nBoundSx,n1])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));

//Link Rought Reticulum
var nRet9 = createNubs([[221.47772216796875,401.8037109375-6,-20],[223.0006103515625,402.31134033203125-9,-20],[225.1326446533203,403.02203369140625-10,-20],[226.4524688720703,403.4281311035156-10,-20],[228.17840576171875,403.7326965332031-9,-20],[229.7012939453125,403.834228515625-9,-20],[231.52874755859375,403.7326965332031-6,-20]]);
var volumeSx = createBezierS1([n1,n2,n3,nRet9])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Closure
var linkSx = createBezierS1([nRac1Dx, nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(linkSx)(domain2)));

/*********************************PART 6*****************************************/
//Dx Control curves

var n1 = createNubs([[227.43763732910156,438.0393371582031,0],[226.16311645507812,434.21575927734375,0],[227.7562713623047,431.34808349609375,0],[230.94256591796875,429.11767578125,0],[237.315185546875,428.48040771484375,0],[241.77601623535156,429.11767578125,0],[246.87411499023438,431.9853515625,0],[250.6976776123047,437.720703125,0]]);
var n2 = createNubs([[230.30531311035156,437.4020690917969,-20],[229.34942626953125,434.85302734375,-20],[229.98667907714844,432.94122314453125,-20],[232.5357208251953,431.6667175292969,-20],[236.6779327392578,431.6667175292969,-20],[240.50149536132812,432.6225891113281,-20],[243.05055236816406,433.8971252441406,-20],[246.55548095703125,436.7648010253906,-20]]);
var n3 = createNubs([[232.85435485839844,437.4020690917969,-40],[231.89846801757812,436.1275329589844,-40],[232.21710205078125,434.21575927734375,-40],[234.12887573242188,434.21575927734375,-40],[237.95245361328125,434.21575927734375,-40],[239.86424255371094,435.4902648925781,-40],[240.82012939453125,436.4461669921875,-40],[241.77601623535156,436.7648010253906,-40]]);

var volumeDx = createBezierS1([n1,n2,n3,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[230.30531311035156,437.4020690917969,0],[229.34942626953125,434.85302734375,0],[229.98667907714844,432.94122314453125,0],[232.5357208251953,431.6667175292969,0],[236.6779327392578,431.6667175292969,0],[240.50149536132812,432.6225891113281,0],[243.05055236816406,433.8971252441406,0],[246.55548095703125,436.7648010253906,0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs([[227.43763732910156,438.0393371582031,0],[229.76995849609375,442.181884765625,0],[232.63539123535156,444.30230712890625,0],[237.22007751464844,446.48004150390625,0],[241.9766845703125,447.39697265625,0],[246.21751403808594,447.11041259765625,0],[249.1975555419922,445.04730224609375,0],[250.8022003173828,441.15032958984375,0],[250.6976776123047,437.720703125,0]]);
var n2 = createNubs([[230.30531311035156,437.4020690917969,-20],[232.40614318847656,440.8638000488281,-20],[234.18270874023438,442.0672607421875,-20],[237.62123107910156,444.13037109375,-20],[241.74745178222656,444.5315246582031,-20],[244.8994140625,444.18768310546875,-20],[246.61866760253906,443.44268798828125,-20],[247.47830200195312,441.03570556640625,-20],[246.55548095703125,436.7648010253906,-20]]);
var n3 = createNubs([[232.85435485839844,437.4020690917969,-40],[234.698486328125,439.94683837890625,-40],[235.5008087158203,440.7491760253906,-40],[238.19432067871094,442.0672607421875,-40],[241.5755157470703,442.46844482421875,-40],[244.0970916748047,441.8380432128906,-40],[244.84210205078125,440.9783935546875,-40],[241.77601623535156,436.7648010253906,-40]]);

var volumeSx = createBezierS1([n1,n2,n3,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs([[230.30531311035156,437.4020690917969,0],[232.40614318847656,440.8638000488281,0],[234.18270874023438,442.0672607421875,0],[237.62123107910156,444.13037109375,0],[241.74745178222656,444.5315246582031,0],[244.8994140625,444.18768310546875,0],[246.61866760253906,443.44268798828125,0],[247.47830200195312,441.03570556640625,0],[246.55548095703125,436.7648010253906,0]]);
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));


/*********************************PART 8*****************************************/
//Dx Control curves

var n1 = createNubs([[185.27728271484375,451.5130310058594,0],[186.71363830566406,447.2039794921875,0],[188.62876892089844,444.5706787109375,0],[191.74085998535156,442.1767578125,0],[195.3317413330078,440.7403869628906,0],[200.8377685546875,438.58587646484375,0],[205.14682006835938,437.388916015625,0],[210.4134521484375,435.4737854003906,0],[214.96189880371094,435.4737854003906,0],[218.79217529296875,438.3464660644531,0],[221.90426635742188,451.5130310058594,0]]);
var n2 = createNubs([[190.06512451171875,451.5130310058594,-12],[192.2196502685547,449.1191101074219,-12],[195.3317413330078,446.00701904296875,-12],[198.20445251464844,443.8525085449219,-12],[202.03472900390625,441.4585876464844,-12],[205.38621520996094,440.5010070800781,-12],[209.21649169921875,439.3040466308594,-12],[212.807373046875,439.3040466308594,-12],[217.11642456054688,440.7403869628906,-12],[218.79217529296875,443.61309814453125,-12],[218.5527801513672,450.79486083984375,-12]]);
var n3 = createNubs([[187.67120361328125,443.8525085449219,-24],[187.19241333007812,439.0646667480469,-24],[188.8681640625,434.9949951171875,-24],[191.74085998535156,431.1647033691406,-24],[195.0923614501953,428.77081298828125,-24],[198.44384765625,427.0950622558594,-24],[202.2741241455078,426.85565185546875,-24],[205.14682006835938,426.1374816894531,-24],[208.73770141601562,426.37689208984375,-24],[213.52554321289062,428.2920227050781,-24],[217.11642456054688,430.2071533203125,-24],[218.79217529296875,434.5162048339844,-24],[219.03155517578125,434.5162048339844,-24]]);
var n4 = createNubs([[195.57113647460938,436.6707458496094,-36],[196.52870178222656,434.9949951171875,-36],[200.8377685546875,432.3616638183594,-36],[208.01953125,430.9253234863281,-36],[212.807373046875,430.446533203125,-36],[216.1588592529297,431.64349365234375,-36],[219.2709503173828,432.60107421875,-36],[220.46791076660156,434.5162048339844,-36],[221.6648712158203,435.9525451660156,-36],[222.6224365234375,438.3464660644531,-36],[223.3406219482422,440.022216796875,-36],[224.53758239746094,442.8949279785156,-36]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[190.06512451171875,451.5130310058594,0],[192.2196502685547,449.1191101074219,0],[195.3317413330078,446.00701904296875,0],[198.20445251464844,443.8525085449219,0],[202.03472900390625,441.4585876464844,0],[205.38621520996094,440.5010070800781,0],[209.21649169921875,439.3040466308594,0],[212.807373046875,439.3040466308594,0],[217.11642456054688,440.7403869628906,0],[218.79217529296875,443.61309814453125,0],[219.03155517578125,447.2039794921875,0],[219.03155517578125,451.0342712402344,0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs(reverseR([[221.90426635742188,451.5130310058594,0],[220.46791076660156,453.6675720214844,0],[219.03155517578125,456.3008728027344,0],[215.68006896972656,458.4554138183594,0],[212.32858276367188,457.73724365234375,0],[208.73770141601562,457.73724365234375,0],[205.86500549316406,458.6947937011719,0],[201.55593872070312,462.2856750488281,0],[197.7256622314453,465.15838623046875,0],[190.78329467773438,463.96142578125,0],[186.4742431640625,459.173583984375,0],[185.27728271484375,451.5130310058594,0]]));
var n2 = createNubs(reverseR([[218.5527801513672,450.79486083984375,-12],[216.8770294189453,453.18878173828125,-12],[215.2012939453125,455.1039123535156,-12],[212.0891876220703,455.1039123535156,-12],[208.9770965576172,454.3857421875,-12],[205.86500549316406,454.6251525878906,-12],[201.31654357910156,457.4978332519531,-12],[198.92262268066406,460.37054443359375,-12],[195.3317413330078,461.328125,-12],[190.06512451171875,458.6947937011719,-12],[189.10755920410156,455.58270263671875,-12],[190.06512451171875,451.5130310058594,-12]]));
var n3 = createNubs(reverseR([[219.03155517578125,434.5162048339844,-24],[219.03155517578125,436.43133544921875,-24],[218.07398986816406,439.0646667480469,-24],[215.68006896972656,442.1767578125,-24],[208.73770141601562,443.8525085449219,-24],[203.71046447753906,444.3312683105469,-24],[196.76809692382812,444.81005859375,-24],[194.13478088378906,444.81005859375,-24],[191.98025512695312,444.5706787109375,-24],[187.67120361328125,443.8525085449219,-24]]));
var n4 = createNubs(reverseR([[224.53758239746094,442.8949279785156,-36],[221.18609619140625,444.0918884277344,-36],[219.51034545898438,444.81005859375,-36],[214.72250366210938,445.2888488769531,-36],[210.4134521484375,444.81005859375,-36],[205.38621520996094,442.1767578125,-36],[202.2741241455078,440.022216796875,-36],[198.92262268066406,438.58587646484375,-36],[196.76809692382812,437.8677062988281,-36],[195.57113647460938,436.6707458496094,-36]]));

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs(reverseR([[219.03155517578125,451.0342712402344,0],[218.5527801513672,450.79486083984375,0],[216.8770294189453,453.18878173828125,0],[215.2012939453125,455.1039123535156,0],[212.0891876220703,455.1039123535156,0],[208.9770965576172,454.3857421875,0],[205.86500549316406,454.6251525878906,0],[201.31654357910156,457.4978332519531,0],[198.92262268066406,460.37054443359375,0],[195.3317413330078,461.328125,0],[190.06512451171875,451.5130310058594,0]]));
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));

/*********************************PART 9*****************************************/
//Dx Control curves

var n1 = createNubs([[203.94985961914062,470.90380859375,0],[207.0619659423828,474.9734802246094,0],[210.89222717285156,476.6492004394531,0],[215.68006896972656,478.0855712890625,0],[219.51034545898438,480.0007019042969,0],[223.81939697265625,483.8309631347656,0],[229.08602905273438,487.1824645996094,0],[235.07083129882812,488.85821533203125,0],[242.25259399414062,486.46429443359375,0],[246.80104064941406,483.3522033691406,0],[247.9980010986328,477.8461608886719,0],[246.5616455078125,472.5795593261719,0]]);
var n2 = createNubs([[208.01953125,470.6643981933594,-40],[210.4134521484375,473.7765197753906,-40],[214.4831085205078,474.73406982421875,-40],[217.59521484375,475.2128601074219,-40],[221.18609619140625,477.3674011230469,-40],[224.53758239746094,480.7188720703125,-40],[229.08602905273438,484.5491638183594,-40],[234.11326599121094,485.0279235839844,-40],[240.33746337890625,483.5915832519531,-40],[243.2101593017578,480.9582824707031,-40],[244.40711975097656,477.6067810058594,-40],[242.73138427734375,472.34014892578125,-40]]);
var n3 = createNubs([[215.440673828125,454.3857421875,-80],[216.39825439453125,458.6947937011719,-80],[219.51034545898438,460.37054443359375,-80],[221.90426635742188,460.6099548339844,-80],[224.53758239746094,459.4129943847656,-80],[226.69210815429688,459.4129943847656,-80],[229.80419921875,460.6099548339844,-80],[232.43751525878906,462.52508544921875,-80],[236.0283966064453,463.4826354980469,-80],[239.61927795410156,463.4826354980469,-80],[242.97076416015625,461.8069152832031,-80],[244.8859100341797,456.540283203125,-80]]);
var n4 = createNubs([[219.03155517578125,436.9101257324219,-70],[220.228515625,440.5010070800781,-70],[222.14366149902344,442.6555480957031,-70],[224.53758239746094,443.37371826171875,-70],[226.93150329589844,443.1343078613281,-70],[228.1284637451172,442.6555480957031,-70],[230.76177978515625,441.9373474121094,-70],[233.87387084960938,442.1767578125,-70],[236.0283966064453,444.5706787109375,-70],[237.94354248046875,444.81005859375,-70],[240.8162384033203,443.37371826171875,-70],[242.97076416015625,439.0646667480469,-70]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[208.01953125,470.6643981933594,0],[210.4134521484375,473.7765197753906,0],[214.4831085205078,474.73406982421875,0],[217.59521484375,475.2128601074219,0],[221.18609619140625,477.3674011230469,0],[224.53758239746094,480.7188720703125,0],[229.08602905273438,484.5491638183594,0],[234.11326599121094,485.0279235839844,0],[240.33746337890625,483.5915832519531,0],[243.2101593017578,480.9582824707031,0],[244.40711975097656,477.6067810058594,0],[242.73138427734375,472.34014892578125,0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs(reverseR([[246.5616455078125,472.5795593261719,0],[243.68894958496094,468.0310974121094,0],[240.33746337890625,465.6371765136719,0],[235.07083129882812,464.2008361816406,0],[229.80419921875,464.2008361816406,0],[226.21331787109375,465.3977966308594,0],[222.86183166503906,465.6371765136719,0],[219.2709503173828,464.6795959472656,0],[215.2012939453125,463.7220458984375,0],[211.3710174560547,463.4826354980469,0],[206.34378051757812,465.6371765136719,0],[203.94985961914062,470.90380859375,0]]));
var n2 = createNubs(reverseR([[242.73138427734375,472.34014892578125,-40],[240.57684326171875,469.94622802734375,-40],[237.7041473388672,468.0310974121094,-40],[233.6344757080078,466.8341369628906,-40],[230.28298950195312,466.8341369628906,-40],[228.1284637451172,467.7917175292969,-40],[223.58001708984375,468.749267578125,-40],[217.59521484375,467.7917175292969,-40],[214.96189880371094,466.3553466796875,-40],[211.13162231445312,466.3553466796875,-40],[208.01953125,470.6643981933594,-40]]));
var n3 = createNubs(reverseR([[244.8859100341797,456.540283203125,-80],[244.40711975097656,454.6251525878906,-80],[241.7738037109375,453.4281921386719,-80],[239.61927795410156,452.4706115722656,-80],[237.22535705566406,451.2736511230469,-80],[235.07083129882812,451.5130310058594,-80],[231.47994995117188,453.18878173828125,-80],[227.1708984375,454.1463623046875,-80],[224.53758239746094,453.4281921386719,-80],[223.10122680664062,451.9918212890625,-80],[219.51034545898438,450.55548095703125,-80],[215.440673828125,454.3857421875,-80]]));
var n4 = createNubs(reverseR([[242.97076416015625,439.0646667480469,-70],[241.534423828125,437.388916015625,-70],[239.3798828125,435.9525451660156,-70],[237.22535705566406,435.4737854003906,-70],[234.83143615722656,434.5162048339844,-70],[233.15570068359375,434.5162048339844,-70],[231.47994995117188,434.9949951171875,-70],[229.5648193359375,435.9525451660156,-70],[225.97393798828125,435.7131652832031,-70],[224.29818725585938,434.5162048339844,-70],[221.6648712158203,434.2768249511719,-70],[219.03155517578125,436.9101257324219,-70]]));

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up= createNubs(reverseR([[242.73138427734375,472.34014892578125,0],[240.57684326171875,469.94622802734375,0],[237.7041473388672,468.0310974121094,0],[233.6344757080078,466.8341369628906,0],[230.28298950195312,466.8341369628906,0],[228.1284637451172,467.7917175292969,0],[223.58001708984375,468.749267578125,0],[217.59521484375,467.7917175292969,0],[214.96189880371094,466.3553466796875,0],[211.13162231445312,466.3553466796875,0],[208.9770965576172,468.0310974121094,0],[208.01953125,470.6643981933594,0]]));
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));



/*********************************PART 2*****************************************/
//Dx Control curves

var n1 = createNubs([[269.9454650878906, 428.2642517089844, 0],[275.63092041015625, 429.5840759277344, 0],[280.4026184082031, 432.4267883300781, 0],[283.143798828125, 436.7923889160156, 0],[282.4331359863281, 439.8381652832031, 0],[279.28582763671875, 443.1885070800781, 0],[274.61566162109375, 444.0007019042969, 0],[270.3515930175781, 443.79766845703125, 0]]);
var n2 = createNubs([[270.1485290527344, 431.6145935058594, -20],[274.3110656738281, 432.7313537597656, -20],[277.5599060058594, 434.4573059082031, -20],[278.5751647949219, 435.9801940917969, -20],[278.6766662597656, 438.518310546875, -20],[277.4583740234375, 440.2442626953125, -20],[274.0065002441406, 440.548828125, -20],[270.0469970703125, 440.8534240722656, -20]]);
var n3 = createNubs([[257.15325927734375, 425.116943359375, -40],[259.48834228515625, 426.2337341308594, -40],[261.4173278808594, 427.4520263671875, -40],[262.83868408203125, 429.27947998046875, -40],[263.2447814941406, 431.9191589355469, -40],[262.2295227050781, 435.06646728515625, -40],[259.79290771484375, 435.67559814453125, -40],[254.91969299316406, 434.7618713378906, -40]]);
var n4 = createNubs([[249.2342529296875, 426.436767578125, -50],[250.65560913085938, 426.436767578125, -50],[252.5845947265625, 427.0459289550781, -50],[253.29527282714844, 428.1627197265625, -50],[253.19375610351562, 429.787109375, -50],[251.97544860839844, 430.8023681640625, -50],[250.14797973632812, 430.8023681640625, -50],[249.13272094726562, 430.29473876953125, -50]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[270.1485290527344, 431.6145935058594, 0],[274.3110656738281, 432.7313537597656, 0],[277.5599060058594, 434.4573059082031, 0],[278.5751647949219, 435.9801940917969, 0],[278.6766662597656, 438.518310546875, 0],[277.4583740234375, 440.2442626953125, 0],[274.0065002441406, 440.548828125, 0],[270.0469970703125, 440.8534240722656, 0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs([[270.3515930175781, 443.79766845703125, 0],[265.5798645019531, 443.2900390625, 0],[260.7066345214844, 442.3763122558594, 0],[257.76239013671875, 440.548828125, 0],[254.8181610107422, 437.0969543457031, 0],[254.8181610107422, 432.5283203125, 0],[256.7471618652344, 430.3962707519531, 0],[260.7066345214844, 428.2642517089844, 0],[265.2752990722656, 428.1627197265625, 0],[269.9454650878906, 428.2642517089844, 0]]);
var n2 = createNubs([[270.0469970703125, 440.8534240722656, -20],[268.7271728515625, 440.75189208984375, -20],[265.681396484375, 439.939697265625, -20],[260.80816650390625, 438.2137451171875, -20],[258.980712890625, 436.7923889160156, -20],[257.9654541015625, 434.1527099609375, -20],[260.0975036621094, 432.02069091796875, -20],[262.7371520996094, 431.4115295410156, -20],[266.2905578613281, 431.4115295410156, -20],[270.1485290527344, 431.6145935058594, -20]]);
var n3 = createNubs([[254.91969299316406, 434.7618713378906, -40],[252.5845947265625, 434.2542419433594, -40],[250.4525604248047, 432.02069091796875, -40],[249.53883361816406, 430.5993347167969, -40],[249.2342529296875, 428.46728515625, -40],[250.24951171875, 426.2337341308594, -40],[251.87391662597656, 425.2184753417969, -40],[253.49832153320312, 424.91387939453125, -40],[255.32579040527344, 424.60931396484375, -40],[257.15325927734375, 425.116943359375, -40]]);
var n4 = createNubs(reverseR([[249.13272094726562, 430.29473876953125, -50],[247.60984802246094, 430.29473876953125, -50],[246.39154052734375, 430.0917053222656, -50],[245.8839111328125, 429.4825439453125, -50],[246.0869598388672, 428.1627197265625, -50],[246.899169921875, 427.3504943847656, -50],[247.81289672851562, 427.0459289550781, -50],[248.0159454345703, 426.7413635253906, -50],[248.62509155273438, 426.5382995605469, -50],[249.2342529296875, 426.436767578125, -50]]));

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs([[270.0469970703125, 440.8534240722656, 0],[268.7271728515625, 440.75189208984375, 0],[265.681396484375, 439.939697265625, 0],[260.80816650390625, 438.2137451171875, 0],[258.980712890625, 436.7923889160156, 0],[257.9654541015625, 434.1527099609375, 0],[260.0975036621094, 432.02069091796875, 0],[262.7371520996094, 431.4115295410156, 0],[266.2905578613281, 431.4115295410156, 0],[270.1485290527344, 431.6145935058594, 0]]);
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));


/*********************************PART 5*****************************************/
//Dx Control curves

var n1 = createNubs([[256.7492370605469, 446.23846435546875, 0],[253.57290649414062, 447.8266296386719, 0],[250.22010803222656, 451.0029602050781, 0],[247.5731658935547, 456.120361328125, 0],[247.22024536132812, 460.7084045410156, 0],[249.1613311767578, 466.7081298828125, 0],[251.45535278320312, 470.0609436035156, 0],[254.45521545410156, 474.11956787109375, 0], [257.455078125, 476.7665100097656, 0]]);
var n2 = createNubs([[256.2198486328125, 450.1206359863281, -30],[254.27874755859375, 451.3558654785156, -30],[252.69058227539062, 453.1205139160156, -30],[250.57302856445312, 456.4732971191406, -30],[250.22010803222656, 460.35546875, -30],[251.2788848876953, 465.29644775390625, -30],[252.86705017089844, 468.4727783203125, -30],[254.98460388183594, 471.1197204589844, -30],[257.27862548828125, 472.7078857421875, -30]]);
var n3 = createNubs([[254.102294921875, 436.70947265625, -50],[250.22010803222656, 437.2388610839844, -50],[248.10255432128906, 438.2976379394531, -50],[246.16146850585938, 439.88580322265625, -50],[245.10269165039062, 441.6504211425781, -50],[244.04391479492188, 443.4150390625, -50],[243.3380584716797, 445.1796875, -50],[242.8086700439453, 447.1207580566406, -50],[242.6322021484375, 449.0618591308594, -50]]);
var n4 = createNubs([[250.57302856445312, 433.1802062988281, -70],[247.5731658935547, 433.1802062988281, -70],[246.51438903808594, 433.53314208984375, -70],[244.57330322265625, 434.2389831542969, -70],[243.16159057617188, 435.4742126464844, -70],[242.6322021484375, 436.1800842285156, -70],[241.74989318847656, 437.2388610839844, -70],[241.04403686523438, 438.4740905761719, -70]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[256.2198486328125, 450.1206359863281, 0],[254.27874755859375, 451.3558654785156, 0],[252.69058227539062, 453.1205139160156, 0],[250.57302856445312, 456.4732971191406, 0],[250.22010803222656, 460.35546875, 0],[251.2788848876953, 465.29644775390625, 0],[252.86705017089844, 468.4727783203125, 0],[254.98460388183594, 471.1197204589844, 0],[257.27862548828125, 472.7078857421875, 0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs(reverseR([[256.7492370605469, 446.23846435546875, 0],[258.51385498046875, 447.1207580566406, 0],[260.4549560546875, 448.532470703125, 0],[262.2195739746094, 451.1794128417969, 0],[262.572509765625, 455.2380676269531, 0],[263.63128662109375, 459.6496276855469, 0],[264.86651611328125, 463.8847351074219, 0],[265.5723571777344, 469.53155517578125, 0],[264.86651611328125, 473.76666259765625, 0],[262.9254150390625, 476.5900573730469, 0],[260.2784729003906, 477.8252868652344, 0], [257.455078125, 476.7665100097656, 0]]));
var n2 = createNubs(reverseR([[256.2198486328125, 450.1206359863281, -30],[257.455078125, 450.47357177734375, -30],[259.0432434082031, 451.70880126953125, -30],[259.5726318359375, 453.4734191894531, -30],[259.5726318359375, 455.4145202636719, -30],[259.74908447265625, 457.3556213378906, -30],[260.63140869140625, 460.17901611328125, -30],[262.3960266113281, 463.3553466796875, -30],[262.74896240234375, 468.1198425292969, -30],[262.2195739746094, 471.4726257324219, -30],[260.9843444824219, 472.3549499511719, -30],[259.0432434082031, 472.3549499511719, -30],[257.27862548828125, 472.88433837890625, -30]]));
var n3 = createNubs(reverseR([[254.102294921875, 436.70947265625, -50],[255.3375244140625, 437.9447021484375, -50],[256.2198486328125, 440.062255859375, -50],[255.69046020507812, 442.00335693359375, -50],[254.102294921875, 443.4150390625, -50],[251.45535278320312, 443.9444274902344, -50],[250.04364013671875, 445.0032043457031, -50],[249.51425170898438, 446.9443054199219, -50],[249.51425170898438, 449.7677001953125, -50],[248.10255432128906, 452.2381896972656, -50],[245.27914428710938, 453.1205139160156, -50],[242.98513793945312, 451.70880126953125, -50], [242.6322021484375, 449.0618591308594, -50],[256.2198486328125, 450.1206359863281, -30],[257.455078125, 450.47357177734375, -30],[259.0432434082031, 451.70880126953125, -30],[259.5726318359375, 453.4734191894531, -30],[259.5726318359375, 455.4145202636719, -30],[259.74908447265625, 457.3556213378906, -30],[260.63140869140625, 460.17901611328125, -30],[262.3960266113281, 463.3553466796875, -30],[262.74896240234375, 468.1198425292969, -30],[262.2195739746094, 471.4726257324219, -30],[260.9843444824219, 472.3549499511719, -30],[259.0432434082031, 472.3549499511719, -30],[257.27862548828125, 472.88433837890625, -30]]));
var n4 = createNubs(reverseR([[250.57302856445312, 433.1802062988281, -70],[250.57302856445312, 434.5919189453125, -70],[251.1024169921875, 436.00360107421875, -70],[250.74949645996094, 437.76824951171875, -70],[248.63194274902344, 438.6505432128906, -70],[246.51438903808594, 437.76824951171875, -70],[245.27914428710938, 437.4153137207031, -70],[244.57330322265625, 437.5917663574219, -70],[244.39683532714844, 439.00347900390625, -70],[244.04391479492188, 440.5916442871094, -70],[242.45574951171875, 442.00335693359375, -70],[240.5146484375, 440.944580078125, -70],[240.16172790527344, 439.7093200683594, -70], [241.04403686523438, 438.4740905761719, -70]]));

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs(reverseR([[256.2198486328125, 450.1206359863281, 0],[257.455078125, 450.47357177734375, 0],[259.0432434082031, 451.70880126953125, 0],[259.5726318359375, 453.4734191894531, 0],[259.5726318359375, 455.4145202636719, 0],[259.74908447265625, 457.3556213378906, 0],[260.63140869140625, 460.17901611328125, 0],[262.3960266113281, 463.3553466796875, 0],[262.74896240234375, 468.1198425292969, 0],[262.2195739746094, 471.4726257324219, 0],[260.9843444824219, 472.3549499511719, 0],[259.0432434082031, 472.3549499511719, 0],[257.27862548828125, 472.88433837890625, 0]]));
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));

/*********************************PART 3*****************************************/
//Dx Control curves

var n1 = createNubs([[274.63531494140625, 483.582275390625, 0],[278.9443664550781, 484.3004455566406, 0],[281.81707763671875, 483.1034851074219, 0],[284.45037841796875, 480.47015380859375, 0],[286.3655090332031, 476.8792724609375, 0],[288.5200500488281, 471.3732604980469, 0],[289.23822021484375, 467.064208984375, 0],[289.7170104980469, 460.6006164550781, 0],[286.84429931640625, 453.4188537597656, 0],[283.0140380859375, 449.5885925292969, 0],[275.5928649902344, 447.912841796875, 0]]);
var n2 = createNubs([[275.832275390625, 479.0338134765625, -40],[278.465576171875, 479.0338134765625, -40],[281.3382873535156, 478.3156433105469, -40],[283.9715881347656, 476.1611022949219, -40],[284.68975830078125, 471.85205078125, -40],[285.407958984375, 466.3460388183594, -40],[285.6473388671875, 460.1218566894531, -40],[283.7322082519531, 454.855224609375, -40],[281.3382873535156, 451.9825134277344, -40],[275.3534851074219, 450.5461730957031, -40]]);
var n3 = createNubs([[255.2445526123047, 452.4613037109375, -60],[259.7929992675781, 453.4188537597656, -60],[262.90509033203125, 452.4613037109375, -60],[264.5808410644531, 449.8279724121094, -60],[265.29901123046875, 447.1946716308594, -60],[265.29901123046875, 443.8431701660156, -60],[264.5808410644531, 439.7735290527344, -60],[263.3838806152344, 436.90081787109375, -60],[262.1869201660156, 434.0281066894531, -60],[260.51116943359375, 432.5917663574219, -60]]);
var n4 = createNubs([[248.3021697998047, 439.7735290527344, -80],[250.4567108154297, 441.2098693847656, -80],[251.65367126464844, 441.68865966796875, -80],[253.0900115966797, 441.68865966796875, -80],[254.76576232910156, 440.49169921875, -80],[255.4839324951172, 438.5765686035156, -80],[256.2021179199219, 435.9432373046875, -80],[256.9202880859375, 433.3099365234375, -80],[256.4414978027344, 430.4372253417969, -80],[255.4839324951172, 428.0433044433594, -80]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[275.832275390625, 479.0338134765625, 0],[278.465576171875, 479.0338134765625, 0],[281.3382873535156, 478.3156433105469, 0],[283.9715881347656, 476.1611022949219, 0],[284.68975830078125, 471.85205078125, 0],[285.407958984375, 466.3460388183594, 0],[285.6473388671875, 460.1218566894531, 0],[283.7322082519531, 454.855224609375, 0],[281.3382873535156, 451.9825134277344, 0],[275.3534851074219, 450.5461730957031, 0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs([[275.5928649902344, 447.912841796875, 0] ,[271.7626037597656, 448.6310119628906, 0],[268.6505126953125, 451.0249328613281, 0],[266.0171813964844, 454.6158142089844, 0],[265.7778015136719, 458.9248962402344, 0],[267.45355224609375, 463.47332763671875, 0],[269.84747314453125, 468.5005798339844, 0],[271.2838134765625, 472.3308410644531, 0],[270.5656433105469, 476.8792724609375, 0],[271.2838134765625, 481.6671142578125, 0], [274.63531494140625, 483.582275390625, 0]]);
var n2 = createNubs([[275.3534851074219, 450.5461730957031, -40],[272.48077392578125, 451.7431335449219, -40],[269.6080627441406, 453.89764404296875, -40],[268.6505126953125, 456.7703552246094, -40],[269.84747314453125, 460.3612365722656, -40],[271.7626037597656, 464.6702880859375, -40],[273.1989440917969, 468.9793395996094, -40],[273.1989440917969, 473.28839111328125, -40],[272.9595642089844, 477.83685302734375, -40], [275.832275390625, 479.0338134765625, -40]]);
var n3 = createNubs([[260.51116943359375, 432.5917663574219, -60],[258.8354187011719, 430.6766052246094, -60],[256.2021179199219, 430.6766052246094, -60],[254.76576232910156, 432.35235595703125, -60],[254.5263671875, 436.4220275878906, -60],[255.2445526123047, 439.0553283691406, -60],[257.1596984863281, 442.4068298339844, -60],[256.9202880859375, 445.279541015625, -60],[253.80819702148438, 447.6734619140625, -60],[253.32940673828125, 451.26434326171875, -60], [255.2445526123047, 452.4613037109375, -60]]);
var n4 = createNubs([[255.4839324951172, 428.0433044433594, -80],[253.80819702148438, 426.128173828125, -80],[252.37184143066406, 423.7342529296875, -80],[250.4567108154297, 423.2554626464844, -80],[247.82339477539062, 424.2130432128906, -80],[246.86582946777344, 426.6069641113281, -80],[247.3446044921875, 429.71905517578125, -80],[248.7809600830078, 431.6341857910156, -80],[249.02035522460938, 434.74627685546875, -80],[247.58399963378906, 436.90081787109375, -80], [248.3021697998047, 439.7735290527344, -80]]);

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs([[275.3534851074219, 450.5461730957031, 0],[272.48077392578125, 451.7431335449219, 0],[269.6080627441406, 453.89764404296875, 0],[268.6505126953125, 456.7703552246094, 0],[269.84747314453125, 460.3612365722656, 0],[271.7626037597656, 464.6702880859375, 0],[273.1989440917969, 468.9793395996094, 0],[273.1989440917969, 473.28839111328125, 0],[272.9595642089844, 477.83685302734375, 0], [275.832275390625, 479.0338134765625, 0]]);
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));

/*********************************PART 4*****************************************/
//Dx Control curves

var n1 = createNubs([[249.03439331054688, 491.335693359375, 0],[249.93368530273438, 494.0335693359375, 0],[251.01284790039062, 497.45086669921875, 0],[253.171142578125, 501.2279052734375, 0],[256.228759765625, 504.10565185546875, 0],[260.0057678222656, 504.4653625488281, 0],[262.5238037109375, 503.38623046875, 0],[265.2216796875, 501.40777587890625, 0],[265.0418395996094, 496.7314453125, 0],[264.1425476074219, 494.3932800292969, 0],[264.8619689941406, 492.2349853515625, 0]]);
var n2 = createNubs([[252.4517059326172, 491.5155334472656, -70],[252.4517059326172, 493.13427734375, -70],[252.9912872314453, 495.4724426269531, -70],[254.61001586914062, 499.0696105957031, -70],[256.228759765625, 500.8681945800781, -70],[257.6676025390625, 501.7674865722656, -70],[259.2863464355469, 502.127197265625, -70],[261.44464111328125, 501.0480651855469, -70],[263.0633850097656, 499.9689025878906, -70],[262.8835144042969, 497.2710266113281, -70],[261.9842224121094, 494.75299072265625, -70],[262.34393310546875, 492.2349853515625, -70]]);
var n3 = createNubs([[242.0198974609375, 463.09783935546875, -80],[242.55947875976562, 465.79571533203125, -80],[243.99835205078125, 467.774169921875, -80],[246.51637268066406, 468.3137512207031, -80],[247.59552001953125, 468.1338806152344, -80],[249.7538299560547, 466.3352966308594, -80],[250.2934112548828, 464.177001953125, -80],[250.6531219482422, 462.5582580566406, -80],[250.11354064941406, 460.9395446777344, -80]]);
var n4 = createNubs([[233.02696228027344, 442.0543518066406, -6-50],[233.02696228027344, 445.65155029296875, -6-50],[233.74639892578125, 447.8098449707031, -6-50],[235.90469360351562, 448.529296875, -6-50],[237.88314819335938, 448.529296875, -6-50],[239.86158752441406, 447.8098449707031, -6-50],[240.76089477539062, 446.1911315917969, -6-50],[241.3004608154297, 444.75225830078125, -6-50],[241.3004608154297, 443.673095703125, -6-50],[241.3004608154297, 442.2342224121094, -6-50]]);

var volumeDx = createBezierS1([n1,n2,n3,n4,nRac1Dx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeDx)(domain2)));

//Boundary Dx
var n2up= createNubs([[252.4517059326172, 491.5155334472656, 0],[252.4517059326172, 493.13427734375, 0],[252.9912872314453, 495.4724426269531, 0],[254.61001586914062, 499.0696105957031, 0],[256.228759765625, 500.8681945800781, 0],[257.6676025390625, 501.7674865722656, 0],[259.2863464355469, 502.127197265625, 0],[261.44464111328125, 501.0480651855469, 0],[263.0633850097656, 499.9689025878906, 0],[262.8835144042969, 497.2710266113281, 0],[261.9842224121094, 494.75299072265625, 0],[262.34393310546875, 492.2349853515625, 0]]);
var surBoundDx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundDx)(domain2)));

 //Sx Control curves 

var n1 = createNubs([[249.03439331054688, 491.335693359375, 0],[249.39410400390625, 489.7169494628906, 0],[250.4732666015625, 486.65936279296875, 0],[253.53086853027344, 482.88232421875, 0],[257.3078918457031, 481.80316162109375, 0],[263.9626770019531, 481.4434509277344, 0],[267.020263671875, 482.5226135253906, 0],[268.4591369628906, 484.1413269042969, 0],[268.4591369628906, 486.1197814941406, 0],[265.7612609863281, 490.6162414550781, 0],[ 264.8619689941406, 492.2349853515625, 0]]);
var n2 = createNubs([[252.4517059326172, 491.5155334472656, -70],[252.4517059326172, 490.07666015625, -70],[253.3509979248047, 486.65936279296875, -70],[256.4085998535156, 485.0406188964844, -70],[262.34393310546875, 483.60174560546875, -70],[265.0418395996094, 483.9614562988281, -70],[265.2216796875, 486.1197814941406, -70],[263.24322509765625, 488.6377868652344, -70],[ 262.34393310546875, 492.2349853515625, -70]]);
var n3 = createNubs([[242.0198974609375, 463.09783935546875, -80],[242.0198974609375, 460.579833984375, -80],[242.1997528076172, 459.1409606933594, -80],[243.99835205078125, 457.8819274902344, -80],[246.69622802734375, 456.9826354980469, -80],[249.39410400390625, 457.1625061035156, -80],[250.2934112548828, 458.2416687011719, -80],[250.2934112548828, 459.8603820800781, -80],[ 250.11354064941406, 460.9395446777344, -80]]);
var n4 = createNubs([[233.02696228027344, 442.0543518066406, -6-50],[233.20681762695312, 440.2557678222656, -6-50],[233.3866729736328, 438.6370544433594, -6-50],[234.10610961914062, 437.7377624511719, -6-50],[237.16371154785156, 437.5578918457031, -6-50],[238.6025848388672, 437.7377624511719, -6-50],[240.2213134765625, 439.3564758300781, -6-50],[ 241.3004608154297, 442.2342224121094, -6-50]]);

var volumeSx = createBezierS1([n1,n2,n3,n4,nRac1Sx])
DRAW(COLOR(mattSteelBlue)(MAP(volumeSx)(domain2)));

//Boundary Sx
var n2up =createNubs([[252.4517059326172, 491.5155334472656, 0],[252.4517059326172, 490.07666015625, 0],[253.3509979248047, 486.65936279296875, 0],[256.4085998535156, 485.0406188964844, 0],[262.34393310546875, 483.60174560546875, 0],[265.0418395996094, 483.9614562988281, 0],[265.2216796875, 486.1197814941406, 0],[263.24322509765625, 488.6377868652344, 0],[ 262.34393310546875, 492.2349853515625, 0]]);
var surBoundSx = createBezierS1([n1,n2up])
DRAW(COLOR(mattSkyBlue)(MAP(surBoundSx)(domain2)));





